<head>
  <title>Project CARS Leaderboard</title>
</head>

<body>
<div class="container">
  <div class="page-header">
    <h1>Project CARS Leaderboard</h1>
    {{> loginButtons}}
  </div>

  {{#if currentUser}}
    <div class="panel panel-info">
      <div class="panel-heading">
        <h3 class="panel-title">Save Race</h3>
      </div>
      <div class="panel-body">
        <form class="save-race navbar-form navbar-left">
          <div class="row">
            <input class="col-xs-2" type="text" name="driver" placeholder="Driver" value="{{currentUser.username}}"/>
            <input class="col-xs-3" type="text" name="lapTime" placeholder="Lap Time" autocomplete="off"/>
            <input class="col-xs-4" type="text" name="carName" placeholder="Car Name"/>
            <input class="col-xs-3" type="text" name="carClassName" placeholder="Car Class"/>
          </div>
          <div class="row">
            <input class="col-xs-7" type="text" name="trackLocation" placeholder="Track Location"/>
            <input class="col-xs-5" type="text" name="trackVariation" placeholder="Track Variation"/>
          </div>
          <div class="row">
            <input type="submit" name="submit" class="btn-sm col-xs-12" value="Save"/>
          </div>
        </form>
      </div>
    </div>
  {{/if}}

  <br/>

  <div class="panel panel-warning">
    <div class="panel-heading">
      <h3 class="panel-title">Unsaved Races</h3>
    </div>
    {{#with unsavedRaces}}
      {{#if count}}
        <table class="table table-striped table-hover">
          <thead>
          {{> raceTableHeader}}
          </thead>
          <tbody>
          {{#each unsavedRaces}}
            {{> raceTableRow}}
          {{/each}}
          </tbody>
        </table>
      {{else}}
        <div class="panel-body">No Unsaved Races</div>
      {{/if}}
    {{/with}}
  </div>

  <br/>

  <div class="panel panel-success">
    <div class="panel-heading">
      <h3 class="panel-title">Saved Races</h3>
    </div>
    <table class="table table-striped table-hover">
      <thead>
      {{> raceTableHeader}}
      </thead>
      <tbody>
      {{#each savedRaces}}
        {{> raceTableRow}}
      {{/each}}
      </tbody>
    </table>
  </div>
</div>
</body>

<template name="raceTableHeader">
  <tr>
    <th>Driver</th>
    <th>Lap Time</th>
    <th>Car</th>
    <th>Class</th>
    <th>Location</th>
    <th>Variation</th>
    <th></th>
  </tr>
</template>

<template name="raceTableRow">
  <tr>
    <td class="driver">{{driver}}</td>
    <td class="lapTime">{{lapTime}}</td>
    <td class="carName">{{carName}}</td>
    <td class="carClassName">{{carClassName}}</td>
    <td class="trackLocation">{{trackLocation}}</td>
    <td class="trackVariation">{{trackVariation}}</td>
    <td><span class="delete glyphicon glyphicon-remove"></span></td>
  </tr>
</template>
